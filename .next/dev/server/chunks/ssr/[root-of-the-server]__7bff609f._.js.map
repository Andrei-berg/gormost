{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/andrei/Desktop/gormost/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n\nexport const supabase = createClient(supabaseUrl, supabaseKey)\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,8LAAY,EAAC,aAAa"}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///Users/andrei/Desktop/gormost/src/lib/shifts.ts"],"sourcesContent":["// –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —Å–º–µ–Ω\n// –ë–∞–∑–∞: 2 —è–Ω–≤–∞—Ä—è 2025 = 4 —Å–º–µ–Ω–∞ (–°—Ç–∞–Ω–∏—à–µ–≤—Å–∫–∏–π –ê.–í.)\n\nexport interface ShiftInfo {\n  shiftNumber: 1 | 2 | 3 | 4\n  shiftName: string\n  chiefName: string\n  chiefTabNumber: string\n  isWorking: boolean\n  period: 'day' | 'night' | 'both'\n}\n\nconst SHIFT_CHIEFS = [\n  { no: 1, name: '–ß–µ–∫–∏–Ω –ê.–í.', tab: '0000-00001' },\n  { no: 2, name: '–ú–∞–∫—Å–∏–º–æ–≤ –ò.–ù.', tab: '0000-00002' },\n  { no: 3, name: '–ö–æ–∂–∏–Ω –í.–ú.', tab: '0000-00003' },\n  { no: 4, name: '–°—Ç–∞–Ω–∏—à–µ–≤—Å–∫–∏–π –ê.–í.', tab: '0000-00004' }\n]\n\n// –ë–∞–∑–æ–≤–∞—è –¥–∞—Ç–∞: 2 —è–Ω–≤–∞—Ä—è 2025 = —Å–º–µ–Ω–∞ 4\nconst BASE_DATE = new Date('2025-01-02')\nconst BASE_SHIFT = 4\n\n/**\n * –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–º–µ–Ω–µ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É\n */\nexport function getShiftForDate(date: Date): ShiftInfo {\n  // –û–±–Ω—É–ª—è–µ–º –≤—Ä–µ–º—è –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ä–∞—Å—á—ë—Ç–∞ –¥–Ω–µ–π\n  const targetDate = new Date(date)\n  targetDate.setHours(0, 0, 0, 0)\n  \n  const baseDate = new Date(BASE_DATE)\n  baseDate.setHours(0, 0, 0, 0)\n  \n  // –†–∞–∑–Ω–∏—Ü–∞ –≤ –¥–Ω—è—Ö\n  const daysDiff = Math.floor((targetDate.getTime() - baseDate.getTime()) / (1000 * 60 * 60 * 24))\n  \n  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –≤ 4-–¥–Ω–µ–≤–Ω–æ–º —Ü–∏–∫–ª–µ (—Å—É—Ç–∫–∏/—Ç—Ä–æ–µ)\n  const cyclePosition = daysDiff % 4\n  \n  // –†–∞–±–æ—á–∏–π –¥–µ–Ω—å (0-–π –¥–µ–Ω—å —Ü–∏–∫–ª–∞)\n  const isWorking = cyclePosition === 0\n  \n  // –ù–æ–º–µ—Ä —Å–º–µ–Ω—ã (—Å–¥–≤–∏–≥ –æ—Ç –±–∞–∑–æ–≤–æ–π)\n  let shiftNumber: 1 | 2 | 3 | 4\n  if (isWorking) {\n    const shiftsCycled = Math.floor(daysDiff / 4)\n    shiftNumber = ((BASE_SHIFT - 1 + shiftsCycled) % 4 + 1) as 1 | 2 | 3 | 4\n  } else {\n    // –í –¥–Ω–∏ –æ—Ç–¥—ã—Ö–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–µ–¥—É—é—â—É—é —Ä–∞–±–æ—á—É—é —Å–º–µ–Ω—É\n    const daysUntilWork = 4 - cyclePosition\n    const nextWorkDate = new Date(targetDate)\n    nextWorkDate.setDate(targetDate.getDate() + daysUntilWork)\n    return getShiftForDate(nextWorkDate)\n  }\n  \n  const chief = SHIFT_CHIEFS.find(c => c.no === shiftNumber)!\n  \n  // SHIFT-DA-1-3 —Ä–∞–±–æ—Ç–∞–µ—Ç –ö–†–£–ì–õ–û–°–£–¢–û–ß–ù–û (–¥–µ–Ω—å + –Ω–æ—á—å)\n  return {\n    shiftNumber,\n    shiftName: `SHIFT-DA-${shiftNumber}-3`,\n    chiefName: chief.name,\n    chiefTabNumber: chief.tab,\n    isWorking,\n    period: 'both' // —Å—É—Ç–∫–∏\n  }\n}\n\n/**\n * –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é —Å–º–µ–Ω—É\n */\nexport function getCurrentShift(): ShiftInfo {\n  return getShiftForDate(new Date())\n}\n\n/**\n * –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–µ—Ä–∏–æ–¥ –¥–Ω—è (–¥–µ–Ω—å/–Ω–æ—á—å)\n */\nexport function getCurrentPeriod(): 'day' | 'night' {\n  const hour = new Date().getHours()\n  // –î–µ–Ω—å: 07:00-19:00, –ù–æ—á—å: 19:00-07:00\n  return (hour >= 7 && hour < 19) ? 'day' : 'night'\n}\n\n/**\n * –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—Å—Ç –ø–µ—Ä–∏–æ–¥–∞\n */\nexport function getPeriodText(period: 'day' | 'night'): string {\n  return period === 'day' ? '–î–ù–ï–í–ù–ê–Ø (07:00-19:00)' : '–ù–û–ß–ù–ê–Ø (19:00-07:00)'\n}\n\n/**\n * –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞—Ç—É –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è\n */\nexport function formatDate(date: Date): string {\n  return new Intl.DateTimeFormat('ru-RU', {\n    day: '2-digit',\n    month: '2-digit',\n    year: 'numeric'\n  }).format(date)\n}\n\n/**\n * –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è\n */\nexport function formatTime(date: Date): string {\n  return new Intl.DateTimeFormat('ru-RU', {\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit'\n  }).format(date)\n}\n"],"names":[],"mappings":"AAAA,2BAA2B;AAC3B,oDAAoD;;;;;;;;;;;;;;;AAWpD,MAAM,eAAe;IACnB;QAAE,IAAI;QAAG,MAAM;QAAc,KAAK;IAAa;IAC/C;QAAE,IAAI;QAAG,MAAM;QAAiB,KAAK;IAAa;IAClD;QAAE,IAAI;QAAG,MAAM;QAAc,KAAK;IAAa;IAC/C;QAAE,IAAI;QAAG,MAAM;QAAqB,KAAK;IAAa;CACvD;AAED,wCAAwC;AACxC,MAAM,YAAY,IAAI,KAAK;AAC3B,MAAM,aAAa;AAKZ,SAAS,gBAAgB,IAAU;IACxC,0CAA0C;IAC1C,MAAM,aAAa,IAAI,KAAK;IAC5B,WAAW,QAAQ,CAAC,GAAG,GAAG,GAAG;IAE7B,MAAM,WAAW,IAAI,KAAK;IAC1B,SAAS,QAAQ,CAAC,GAAG,GAAG,GAAG;IAE3B,iBAAiB;IACjB,MAAM,WAAW,KAAK,KAAK,CAAC,CAAC,WAAW,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,CAAC,OAAO,KAAK,KAAK,EAAE;IAE9F,oDAAoD;IACpD,MAAM,gBAAgB,WAAW;IAEjC,gCAAgC;IAChC,MAAM,YAAY,kBAAkB;IAEpC,iCAAiC;IACjC,IAAI;IACJ,IAAI,WAAW;QACb,MAAM,eAAe,KAAK,KAAK,CAAC,WAAW;QAC3C,cAAe,CAAC,aAAa,IAAI,YAAY,IAAI,IAAI;IACvD,OAAO;QACL,kDAAkD;QAClD,MAAM,gBAAgB,IAAI;QAC1B,MAAM,eAAe,IAAI,KAAK;QAC9B,aAAa,OAAO,CAAC,WAAW,OAAO,KAAK;QAC5C,OAAO,gBAAgB;IACzB;IAEA,MAAM,QAAQ,aAAa,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAE9C,oDAAoD;IACpD,OAAO;QACL;QACA,WAAW,CAAC,SAAS,EAAE,YAAY,EAAE,CAAC;QACtC,WAAW,MAAM,IAAI;QACrB,gBAAgB,MAAM,GAAG;QACzB;QACA,QAAQ,OAAO,QAAQ;IACzB;AACF;AAKO,SAAS;IACd,OAAO,gBAAgB,IAAI;AAC7B;AAKO,SAAS;IACd,MAAM,OAAO,IAAI,OAAO,QAAQ;IAChC,uCAAuC;IACvC,OAAO,AAAC,QAAQ,KAAK,OAAO,KAAM,QAAQ;AAC5C;AAKO,SAAS,cAAc,MAAuB;IACnD,OAAO,WAAW,QAAQ,0BAA0B;AACtD;AAKO,SAAS,WAAW,IAAU;IACnC,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;QACtC,KAAK;QACL,OAAO;QACP,MAAM;IACR,GAAG,MAAM,CAAC;AACZ;AAKO,SAAS,WAAW,IAAU;IACnC,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;QACtC,MAAM;QACN,QAAQ;QACR,QAAQ;IACV,GAAG,MAAM,CAAC;AACZ"}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///Users/andrei/Desktop/gormost/src/components/Header.tsx"],"sourcesContent":["'use client'\nimport { useEffect, useState } from 'react'\nimport { getCurrentShift, getCurrentPeriod, formatDate, formatTime, getPeriodText, ShiftInfo } from '@/lib/shifts'\n\ninterface HeaderProps {\n  title?: string\n  subtitle?: string\n  userRole?: string\n  userName?: string\n}\n\nexport default function Header({ title, subtitle, userRole, userName }: HeaderProps) {\n  const [currentTime, setCurrentTime] = useState(new Date())\n  const [shift, setShift] = useState<ShiftInfo | null>(null)\n  const [period, setPeriod] = useState<'day' | 'night'>('day')\n\n  useEffect(() => {\n    // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É\n    const timer = setInterval(() => {\n      setCurrentTime(new Date())\n    }, 1000)\n\n    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–º–µ–Ω—É –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É\n    const updateShift = () => {\n      setShift(getCurrentShift())\n      setPeriod(getCurrentPeriod())\n    }\n    updateShift()\n    const shiftTimer = setInterval(updateShift, 60000)\n\n    return () => {\n      clearInterval(timer)\n      clearInterval(shiftTimer)\n    }\n  }, [])\n\n  return (\n    <div style={{\n      background: 'linear-gradient(135deg, rgba(139,92,246,0.15) 0%, rgba(59,130,246,0.15) 100%)',\n      borderRadius: '16px',\n      padding: '20px 24px',\n      marginBottom: '20px',\n      border: '1px solid rgba(255,255,255,0.15)',\n      display: 'flex',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      flexWrap: 'wrap',\n      gap: '16px'\n    }}>\n      {/* –õ–µ–≤–∞—è —á–∞—Å—Ç—å: –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞–Ω–µ–ª–∏ */}\n      <div>\n        <h1 style={{\n          color: 'white',\n          margin: 0,\n          fontSize: '28px',\n          fontWeight: 'bold',\n          marginBottom: subtitle ? '8px' : 0\n        }}>\n          {title || '–õ–µ—Ñ–æ—Ä—Ç–æ–≤—Å–∫–∏–π —Ç–æ–Ω–Ω–µ–ª—å'}\n        </h1>\n        {subtitle && (\n          <p style={{\n            color: 'rgba(255,255,255,0.7)',\n            margin: 0,\n            fontSize: '14px'\n          }}>\n            {subtitle}\n          </p>\n        )}\n      </div>\n\n      {/* –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å: –¥–∞—Ç–∞, –≤—Ä–µ–º—è, —Å–º–µ–Ω–∞ */}\n      <div style={{\n        display: 'flex',\n        gap: '12px',\n        flexWrap: 'wrap',\n        alignItems: 'center'\n      }}>\n        {/* –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è */}\n        <div style={{\n          background: 'rgba(0,0,0,0.3)',\n          borderRadius: '12px',\n          padding: '10px 16px',\n          border: '1px solid rgba(255,255,255,0.2)'\n        }}>\n          <div style={{\n            color: 'rgba(255,255,255,0.6)',\n            fontSize: '11px',\n            marginBottom: '4px'\n          }}>\n            –î–ê–¢–ê –ò –í–†–ï–ú–Ø\n          </div>\n          <div style={{\n            color: 'white',\n            fontSize: '16px',\n            fontWeight: 'bold',\n            fontFamily: 'monospace'\n          }}>\n            {formatDate(currentTime)} ‚Ä¢ {formatTime(currentTime)}\n          </div>\n        </div>\n\n        {/* –°–º–µ–Ω–∞ */}\n        {shift && (\n          <div style={{\n            background: 'rgba(139,92,246,0.25)',\n            borderRadius: '12px',\n            padding: '10px 16px',\n            border: '1px solid rgba(139,92,246,0.4)'\n          }}>\n            <div style={{\n              color: 'rgba(255,255,255,0.6)',\n              fontSize: '11px',\n              marginBottom: '4px'\n            }}>\n              –¢–ï–ö–£–©–ê–Ø –°–ú–ï–ù–ê\n            </div>\n            <div style={{\n              color: 'white',\n              fontSize: '16px',\n              fontWeight: 'bold'\n            }}>\n              {shift.shiftName} ‚Ä¢ {shift.chiefName}\n            </div>\n          </div>\n        )}\n\n        {/* –î–µ–Ω—å/–ù–æ—á—å */}\n        <div style={{\n          background: period === 'day' \n            ? 'rgba(234,179,8,0.25)' \n            : 'rgba(59,130,246,0.25)',\n          borderRadius: '12px',\n          padding: '10px 16px',\n          border: period === 'day'\n            ? '1px solid rgba(234,179,8,0.4)'\n            : '1px solid rgba(59,130,246,0.4)'\n        }}>\n          <div style={{\n            color: 'rgba(255,255,255,0.6)',\n            fontSize: '11px',\n            marginBottom: '4px'\n          }}>\n            –ü–ï–†–ò–û–î\n          </div>\n          <div style={{\n            color: 'white',\n            fontSize: '16px',\n            fontWeight: 'bold'\n          }}>\n            {period === 'day' ? '‚òÄÔ∏è –î–ï–ù–¨' : 'üåô –ù–û–ß–¨'}\n          </div>\n        </div>\n\n        {/* –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω) */}\n        {userName && (\n          <div style={{\n            background: 'rgba(34,197,94,0.25)',\n            borderRadius: '12px',\n            padding: '10px 16px',\n            border: '1px solid rgba(34,197,94,0.4)'\n          }}>\n            <div style={{\n              color: 'rgba(255,255,255,0.6)',\n              fontSize: '11px',\n              marginBottom: '4px'\n            }}>\n              {userRole?.toUpperCase() || '–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨'}\n            </div>\n            <div style={{\n              color: 'white',\n              fontSize: '16px',\n              fontWeight: 'bold'\n            }}>\n              {userName}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAWe,SAAS,OAAO,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAe;IACjF,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC,IAAI;IACnD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAmB;IACrD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAkB;IAEtD,IAAA,kNAAS,EAAC;QACR,iCAAiC;QACjC,MAAM,QAAQ,YAAY;YACxB,eAAe,IAAI;QACrB,GAAG;QAEH,gCAAgC;QAChC,MAAM,cAAc;YAClB,SAAS,IAAA,uIAAe;YACxB,UAAU,IAAA,wIAAgB;QAC5B;QACA;QACA,MAAM,aAAa,YAAY,aAAa;QAE5C,OAAO;YACL,cAAc;YACd,cAAc;QAChB;IACF,GAAG,EAAE;IAEL,qBACE,8OAAC;QAAI,OAAO;YACV,YAAY;YACZ,cAAc;YACd,SAAS;YACT,cAAc;YACd,QAAQ;YACR,SAAS;YACT,gBAAgB;YAChB,YAAY;YACZ,UAAU;YACV,KAAK;QACP;;0BAEE,8OAAC;;kCACC,8OAAC;wBAAG,OAAO;4BACT,OAAO;4BACP,QAAQ;4BACR,UAAU;4BACV,YAAY;4BACZ,cAAc,WAAW,QAAQ;wBACnC;kCACG,SAAS;;;;;;oBAEX,0BACC,8OAAC;wBAAE,OAAO;4BACR,OAAO;4BACP,QAAQ;4BACR,UAAU;wBACZ;kCACG;;;;;;;;;;;;0BAMP,8OAAC;gBAAI,OAAO;oBACV,SAAS;oBACT,KAAK;oBACL,UAAU;oBACV,YAAY;gBACd;;kCAEE,8OAAC;wBAAI,OAAO;4BACV,YAAY;4BACZ,cAAc;4BACd,SAAS;4BACT,QAAQ;wBACV;;0CACE,8OAAC;gCAAI,OAAO;oCACV,OAAO;oCACP,UAAU;oCACV,cAAc;gCAChB;0CAAG;;;;;;0CAGH,8OAAC;gCAAI,OAAO;oCACV,OAAO;oCACP,UAAU;oCACV,YAAY;oCACZ,YAAY;gCACd;;oCACG,IAAA,kIAAU,EAAC;oCAAa;oCAAI,IAAA,kIAAU,EAAC;;;;;;;;;;;;;oBAK3C,uBACC,8OAAC;wBAAI,OAAO;4BACV,YAAY;4BACZ,cAAc;4BACd,SAAS;4BACT,QAAQ;wBACV;;0CACE,8OAAC;gCAAI,OAAO;oCACV,OAAO;oCACP,UAAU;oCACV,cAAc;gCAChB;0CAAG;;;;;;0CAGH,8OAAC;gCAAI,OAAO;oCACV,OAAO;oCACP,UAAU;oCACV,YAAY;gCACd;;oCACG,MAAM,SAAS;oCAAC;oCAAI,MAAM,SAAS;;;;;;;;;;;;;kCAM1C,8OAAC;wBAAI,OAAO;4BACV,YAAY,WAAW,QACnB,yBACA;4BACJ,cAAc;4BACd,SAAS;4BACT,QAAQ,WAAW,QACf,kCACA;wBACN;;0CACE,8OAAC;gCAAI,OAAO;oCACV,OAAO;oCACP,UAAU;oCACV,cAAc;gCAChB;0CAAG;;;;;;0CAGH,8OAAC;gCAAI,OAAO;oCACV,OAAO;oCACP,UAAU;oCACV,YAAY;gCACd;0CACG,WAAW,QAAQ,YAAY;;;;;;;;;;;;oBAKnC,0BACC,8OAAC;wBAAI,OAAO;4BACV,YAAY;4BACZ,cAAc;4BACd,SAAS;4BACT,QAAQ;wBACV;;0CACE,8OAAC;gCAAI,OAAO;oCACV,OAAO;oCACP,UAAU;oCACV,cAAc;gCAChB;0CACG,UAAU,iBAAiB;;;;;;0CAE9B,8OAAC;gCAAI,OAAO;oCACV,OAAO;oCACP,UAAU;oCACV,YAAY;gCACd;0CACG;;;;;;;;;;;;;;;;;;;;;;;;AAOf"}},
    {"offset": {"line": 394, "column": 0}, "map": {"version":3,"sources":["file:///Users/andrei/Desktop/gormost/src/app/foreman/page.tsx"],"sourcesContent":["'use client'\nimport { useEffect, useState } from 'react'\nimport { supabase } from '@/lib/supabase'\nimport Header from '@/components/Header'\n\ninterface Request {\n  request_id: string\n  service_id: string\n  location_text: string\n  work_description: string\n  status: string\n  priority?: string\n  urgency?: string\n  fact_start?: string\n  fact_finish?: string\n  date_work: string\n  shift_type: string\n}\n\nexport default function ForemanPage() {\n  const [myTasks, setMyTasks] = useState<Request[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    loadMyTasks()\n\n    // Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è\n    const channel = supabase\n      .channel('foreman-updates')\n      .on('postgres_changes', {\n        event: '*',\n        schema: 'public',\n        table: 'requests'\n      }, () => {\n        loadMyTasks()\n      })\n      .subscribe()\n\n    return () => { supabase.removeChannel(channel) }\n  }, [])\n\n  async function loadMyTasks() {\n    setLoading(true)\n\n    // TODO: —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–µ–∫—É—â–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (assigned_users)\n    const { data } = await supabase\n      .from('requests')\n      .select('*')\n      .in('status', ['PLANNED', 'IN_PROGRESS', 'CHECKING'])\n      .order('priority', { ascending: false })\n      .order('created_at', { ascending: false })\n\n    setMyTasks(data || [])\n    setLoading(false)\n  }\n\n  async function startTask(requestId: string) {\n    const now = new Date().toISOString()\n\n    await supabase\n      .from('requests')\n      .update({\n        status: 'IN_PROGRESS',\n        fact_start: now\n      })\n      .eq('request_id', requestId)\n\n    loadMyTasks()\n  }\n\n  async function finishTask(requestId: string) {\n    const now = new Date().toISOString()\n\n    await supabase\n      .from('requests')\n      .update({\n        status: 'DONE',\n        fact_finish: now\n      })\n      .eq('request_id', requestId)\n\n    loadMyTasks()\n  }\n\n  const statusGroups: Record<string, Request[]> = {\n    'PLANNED': [],\n    'IN_PROGRESS': [],\n    'CHECKING': []\n  }\n\n  myTasks.forEach(task => {\n    const status = task.status || 'PLANNED'\n    if (statusGroups[status]) {\n      statusGroups[status].push(task)\n    }\n  })\n\n  const statusLabels: Record<string, string> = {\n    'PLANNED': 'üìã –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ',\n    'IN_PROGRESS': '‚öôÔ∏è –í —Ä–∞–±–æ—Ç–µ',\n    'CHECKING': 'üîç –ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ'\n  }\n\n  const statusColors: Record<string, string> = {\n    'PLANNED': 'rgba(59,130,246,0.2)',\n    'IN_PROGRESS': 'rgba(139,92,246,0.2)',\n    'CHECKING': 'rgba(249,115,22,0.2)'\n  }\n\n  return (\n    <div style={{\n      minHeight: '100vh',\n      background: 'linear-gradient(135deg, #0f172a 0%, #1e293b 100%)',\n      padding: '20px'\n    }}>\n      {/* HEADER */}\n      <Header\n        title=\"üë∑ –ú–ê–°–¢–ï–† / –ë–†–ò–ì–ê–î–ò–†\"\n        subtitle=\"–ú–æ–∏ –∑–∞–¥–∞—á–∏ ‚Ä¢ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç ‚Ä¢ –û—Ç—á—ë—Ç—ã\"\n        userRole=\"–ú–∞—Å—Ç–µ—Ä\"\n        userName=\"–ë—Ä–∏–≥–∞–¥–∞\"\n      />\n\n      {/* KPI */}\n      <div style={{\n        display: 'grid',\n        gridTemplateColumns: 'repeat(auto-fit, minmax(180px, 1fr))',\n        gap: '15px',\n        marginBottom: '20px'\n      }}>\n        {Object.entries(statusLabels).map(([status, label]) => (\n          <div key={status} style={{\n            background: statusColors[status],\n            border: '1px solid rgba(255,255,255,0.1)',\n            borderRadius: '12px',\n            padding: '20px',\n            textAlign: 'center'\n          }}>\n            <div style={{\n              fontSize: '32px',\n              fontWeight: 'bold',\n              color: 'white',\n              marginBottom: '8px'\n            }}>\n              {statusGroups[status].length}\n            </div>\n            <div style={{\n              fontSize: '13px',\n              color: 'rgba(255,255,255,0.7)'\n            }}>\n              {label}\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* –ó–ê–î–ê–ß–ò */}\n      <div style={{\n        background: 'rgba(255,255,255,0.05)',\n        borderRadius: '16px',\n        padding: '20px',\n        border: '1px solid rgba(255,255,255,0.1)'\n      }}>\n        <div style={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginBottom: '20px'\n        }}>\n          <h2 style={{ color: 'white', fontSize: '18px', margin: 0 }}>\n            üìù –ú–æ–∏ –∑–∞–¥–∞—á–∏\n          </h2>\n          <button\n            onClick={loadMyTasks}\n            style={{\n              background: 'rgba(59,130,246,0.2)',\n              border: '1px solid rgba(59,130,246,0.3)',\n              borderRadius: '10px',\n              padding: '8px 16px',\n              color: 'white',\n              cursor: 'pointer',\n              fontSize: '13px'\n            }}\n          >\n            üîÑ –û–±–Ω–æ–≤–∏—Ç—å\n          </button>\n        </div>\n\n        {loading ? (\n          <div style={{ textAlign: 'center', padding: '60px', color: 'rgba(255,255,255,0.5)' }}>\n            ‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...\n          </div>\n        ) : myTasks.length === 0 ? (\n          <div style={{ textAlign: 'center', padding: '60px', color: 'rgba(255,255,255,0.4)' }}>\n            ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á –Ω–µ—Ç\n          </div>\n        ) : (\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\n            {myTasks.map(task => (\n              <div\n                key={task.request_id}\n                style={{\n                  background: 'rgba(255,255,255,0.03)',\n                  border: '1px solid rgba(255,255,255,0.1)',\n                  borderRadius: '12px',\n                  padding: '16px'\n                }}\n              >\n                <div style={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'flex-start',\n                  marginBottom: '12px'\n                }}>\n                  <div>\n                    <div style={{\n                      color: 'white',\n                      fontWeight: 'bold',\n                      marginBottom: '6px',\n                      fontSize: '14px',\n                      fontFamily: 'monospace'\n                    }}>\n                      {task.request_id}\n                    </div>\n                    <div style={{\n                      color: 'rgba(255,255,255,0.6)',\n                      fontSize: '12px'\n                    }}>\n                      {task.service_id} ‚Ä¢ {task.date_work} ‚Ä¢ {task.shift_type === 'DAY' ? 'üåû –î–µ–Ω—å' : 'üåô –ù–æ—á—å'}\n                    </div>\n                  </div>\n\n                  <div style={{\n                    background: statusColors[task.status] || 'rgba(255,255,255,0.1)',\n                    borderRadius: '8px',\n                    padding: '6px 12px',\n                    fontSize: '12px',\n                    color: 'white'\n                  }}>\n                    {statusLabels[task.status] || task.status}\n                  </div>\n                </div>\n\n                <div style={{\n                  color: 'rgba(255,255,255,0.7)',\n                  fontSize: '14px',\n                  marginBottom: '8px'\n                }}>\n                  üìç {task.location_text}\n                </div>\n\n                <div style={{\n                  color: 'rgba(255,255,255,0.9)',\n                  fontSize: '14px',\n                  marginBottom: '16px',\n                  lineHeight: '1.5'\n                }}>\n                  {task.work_description}\n                </div>\n\n                {task.priority === 'HIGH' && (\n                  <div style={{\n                    display: 'inline-block',\n                    background: 'rgba(239,68,68,0.2)',\n                    border: '1px solid rgba(239,68,68,0.3)',\n                    borderRadius: '6px',\n                    padding: '4px 10px',\n                    fontSize: '12px',\n                    color: 'white',\n                    marginBottom: '12px'\n                  }}>\n                    üî• –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç\n                  </div>\n                )}\n\n                <div style={{\n                  display: 'flex',\n                  gap: '10px',\n                  marginTop: '12px'\n                }}>\n                  {task.status === 'PLANNED' && (\n                    <button\n                      onClick={() => startTask(task.request_id)}\n                      style={{\n                        background: 'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)',\n                        border: 'none',\n                        borderRadius: '10px',\n                        padding: '10px 20px',\n                        color: 'white',\n                        cursor: 'pointer',\n                        fontWeight: 'bold',\n                        fontSize: '14px'\n                      }}\n                    >\n                      ‚ñ∂Ô∏è –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É\n                    </button>\n                  )}\n\n                  {task.status === 'IN_PROGRESS' && (\n                    <button\n                      onClick={() => finishTask(task.request_id)}\n                      style={{\n                        background: 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',\n                        border: 'none',\n                        borderRadius: '10px',\n                        padding: '10px 20px',\n                        color: 'white',\n                        cursor: 'pointer',\n                        fontWeight: 'bold',\n                        fontSize: '14px'\n                      }}\n                    >\n                      ‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞—á—É\n                    </button>\n                  )}\n\n                  {task.fact_start && (\n                    <div style={{\n                      color: 'rgba(255,255,255,0.6)',\n                      fontSize: '12px',\n                      alignSelf: 'center'\n                    }}>\n                      üïí –ù–∞—á–∞–ª–æ: {new Date(task.fact_start).toLocaleString('ru')}\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}